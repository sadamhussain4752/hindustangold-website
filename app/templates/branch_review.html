{% extends "home.html" %}
{% block main %}
<main class="review_page">

  <section id="Home9" class="review_page">

    <div class="overlay">

    </div>
    <div class="container" style="position:relative;z-index: 1;">
      <div class="row">
        <div class="col-md-6 col-lg-6">
          <h1 class="heading" style="text-transform: none;">Gold Buyer in {{ title_branch }}, {{ location | capitalize}}</h1>
          <p class="rating"><span class="badge bg-success">5.0</span> <i class="fa fa-star stars "></i><i class="fa fa-star stars "></i><i class="fa fa-star stars "></i><i class="fa fa-star stars "></i><i class="fa fa-star stars "></i> 388 votes</p>
          <p class="loc"><a href="{{ selected_branch.branch.gmap_link }}" target="_blank"><i class="fa fa-map-marker"></i> {{selected_branch.branch.name }}</a></p>
          <p class="call"><a href="tel:08088550033"><i class="fa fa-phone" style="transform: rotate(90deg);"></i> {{ selected_branch.branch.contact_no }}</a></p>
        </div>
      </div>
    </div>
  </section>
  <section id="review_section">
    <div class="container">
      <div class="review-section-overlay">
      <div class="row">
        <div class="col-md-4">
          <div class="branch_img">
            <a href="{{ selected_branch.branch.gmap_link }}"  target="_blank">
              <img src="/{{ branch_img }}" alt="Hindustan Gold Company - {{ selected_branch.branch.name }}" />
            </a>
          </div>
          <div class="map-desc">
            <h3>{{ selected_branch.branch.name }}</h3>
            <p class="para"><span><a href="mailto:info@hindustangoldcompany.com"><i class="fa fa-envelope"></i> {{ selected_branch.branch.email }}</a> </span><br><span><a href="tel:{{ selected_branch.branch.contact_no }}"> <i class="fa fa-phone" style="transform: rotate(90deg);"></i> {{ selected_branch.branch.contact_no }}</a></span></p>
           <a href="{{ selected_branch.branch.gmap_link }}" target="_blank"> <p class="para"><i class="fa fa-map-marker"></i> Hindustan Gold Company {{ selected_branch.branch.address }}-{{ selected_branch.branch.pincode }}, {{ selected_branch.city.name }}, {{ selected_branch.state.name }}.</p></a>
          </div>
        </div>
        <div class="col-md-8">
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
              <button class="nav-link active" id="home-tab" data-bs-toggle="tab" data-bs-target="#writeReview" type="button" role="tab" aria-controls="writeReview" aria-selected="true"><i class='fa fa-pencil'></i> Write a Review</button>
            </li>
            <li class="nav-item" role="presentation">
              <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false"><i class='fas fa-grin-hearts'></i> Review and Rating</button>
            </li>
          </ul>        
          <div class="tab-content" id="myTabContent">
           <b>Hindustan</b> <b>Gold Company</b> <b>{{selected_branch.branch.name}}</b> 
            <p>
              {% if selected_branch.branch.description %}{{ selected_branch.branch.description }} {% endif %}
            </p>
            <form method="post" action="" class="tab-pane fade show active" id="writeReview" role="tabpanel" aria-labelledby="home-tab">
              <div class="get_ratings">
                Please rate your experience 
                <div class="rrating-box">
                  <input type="radio" name="rating" class="rating" value="1" required/>
                  <input type="radio" name="rating" class="rating" value="2" required/>
                  <input type="radio" name="rating" class="rating" value="3"required />
                  <input type="radio" name="rating" class="rating" value="4" required/>
                  <input type="radio" name="rating" class="rating" value="5"required />
                </div>
              </div>
              <div class="review-input">                
                <input type="text" name="username" id="username" class="form-control" placeholder="Please Enter your name" required />                
              </div>
              <div class="review-input">                
                <input type="email" name="email" id="email" class="form-control" placeholder="Please Enter your email" required />                
              </div>
              <div class="review-input">                
                <input name="contact_no" id="contact_no" class="form-control" placeholder="Please Enter your phone number" required />                
              </div>
              <div class="review-input">
                <h3>Add Review</h3>
                <textarea name="review" id="review" class="form-control" col="40" row="40" placeholder="Write your review...." required></textarea>
                <button type="submit" class="btn btn-primary">Submit</button>
              </div>
            </form>
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
              {% include "common/branch_reviews.html" %}
            </div>
          </div>

        </div>
      </div> 
    </div>
    </div>
  </section>
  <script type="text/javascript">
    (function($){
    $.fn.rating = function(callback){
        
        callback = callback || function(){};

        // each for all item
        this.each(function(i, v){
            
            $(v).data('rating', {callback:callback})
                .bind('init.rating', $.fn.rating.init)
                .bind('set.rating', $.fn.rating.set)
                .bind('hover.rating', $.fn.rating.hover)
                .trigger('init.rating');
        });
    };
    
    $.extend($.fn.rating, {
        init: function(e){
            var el = $(this),
                list = '',
                isChecked = null,
                childs = el.children(),
                i = 0,
                l = childs.length;
            
            for (; i < l; i++) {
                list = list + '<a class="star" title="' + $(childs[i]).val() + '" />';
                if ($(childs[i]).is(':checked')) {
                    isChecked = $(childs[i]).val();
                };
            };
            
            childs.hide();
            
            el
                .append('<div class="stars">' + list + '</div>')
                .trigger('set.rating', isChecked);
            
            $('a', el).bind('click', $.fn.rating.click);            
            el.trigger('hover.rating');
        },
        set: function(e, val) {
            var el = $(this),
                item = $('a', el),
                input = undefined;
            
            if (val) {
                item.removeClass('fullStar');
                
                input = item.filter(function(i){
                    if ($(this).attr('title') == val)
                        return $(this);
                    else
                        return false;
                });
                
                input
                    .addClass('fullStar')
                    .prevAll()
                    .addClass('fullStar');
            }
            
            return;
        },
        hover: function(e){
            var el = $(this),
                stars = $('a', el);
            
            stars.bind('mouseenter', function(e){
                // add tmp class when mouse enter
                $(this)
                    .addClass('tmp_fs')
                    .prevAll()
                    .addClass('tmp_fs');
                
                $(this).nextAll()
                    .addClass('tmp_es');
            });
            
            stars.bind('mouseleave', function(e){
                // remove all tmp class when mouse leave
                $(this)
                    .removeClass('tmp_fs')
                    .prevAll()
                    .removeClass('tmp_fs');
                
                $(this).nextAll()
                    .removeClass('tmp_es');
            });
        },
        click: function(e){
            e.preventDefault();
            var el = $(e.target),
                container = el.parent().parent(),
                inputs = container.children('input'),
                rate = el.attr('title');
                
            matchInput = inputs.filter(function(i){
                if ($(this).val() == rate)
                    return true;
                else
                    return false;
            });
            
            matchInput
                .prop('checked', true)
				.siblings('input').prop('checked', false);
            
            container
                .trigger('set.rating', matchInput.val())
                .data('rating').callback(rate, e);
        }
    });
    
})(jQuery);



$(function(){
    $('.rrating-box').rating();
});
   

$(function(){
  // $('.container').rating(function(vote, event){
    // write your ajax code here
    // For example;
   // $.get(document.URL, {vote: vote});
});

  </script>
  </main>
  {% endblock %}
