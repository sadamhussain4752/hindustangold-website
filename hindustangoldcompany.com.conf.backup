##
# You should look at the following URL's in order to grasp a solid understanding
# of Nginx configuration files in order to fully unleash the power of Nginx.
# https://www.nginx.com/resources/wiki/start/
# https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/
# https://wiki.debian.org/Nginx/DirectoryS


server {
#    listen 80;
 #   listen [::]:80;
    server_name www.hindustangoldcompany.com hindustangoldcompany.com;      
#    server_name _;
#    server_tokens off;     
    
    if ($host = www.hindustangoldcompany.com) {
        return 301 https://hindustangoldcompany.com$request_uri;
    } # managed by Certbot 
#    return 301 https://hindustangoldcompany.com$request_uri;               

    location / {
        include proxy_params;
        proxy_pass http://unix:/run/gunicorn.sock;
    }
    location /robots.txt {
            alias /var/www/html/robots.txt;
    }
    location /sitemap.xml {
           alias /var/www/html/sitemap.xml;
    }

    error_page 500 502 503 504 400 404 403 /var/www/html/error_404.html;

    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/hindustangoldcompany.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/hindustangoldcompany.com/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot


}

server {
    listen 80;
    listen [::]:80;
    server_name _;
    return 301 https://$host$request_uri;
}

#server {
   # listen 80;
    #server_name 3.111.168.101 hindustangoldcompany.com;
    #if ($host = hindustangoldcompany.com) {
     #   return 301 https://hindustangoldcompany.com$request_uri;
    #} # managed by Certbot

   # if ($host = http://hindustangoldcompany.com) {
  #     return 301 https://hindustangoldcompany.com$request_uri;
 #   } # managed by Certbot
    #return 404; # managed by Certbot

	


#}
